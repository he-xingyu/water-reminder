    - name: Build application
      run: |
        # 先清空 dist 目录
        rm -rf dist
        mkdir -p dist
        
        # 执行构建
        npm run build:mac
        
        # 立即清理，只保留 .dmg 文件
        cd dist
        echo "构建后的文件:"
        ls -la
        
        # 找到 .dmg 文件
        dmg_file=$(find . -name "*.dmg" -type f | head -1)
        
        if [ -n "$dmg_file" ]; then
          echo "找到 .dmg 文件: $dmg_file"
          
          # 备份 .dmg 文件到临时位置
          temp_dir=$(mktemp -d)
          cp "$dmg_file" "$temp_dir/"
          
          # 清空 dist 目录
          rm -rf *
          
          # 把 .dmg 文件移回来
          mv "$temp_dir"/*.dmg .
          
          # 清理临时目录
          rm -rf "$temp_dir"
          
          echo "清理后的文件:"
          ls -la
        else
          echo "❌ 未找到 .dmg 文件!"
          exit 1
        fi
      shell: bash